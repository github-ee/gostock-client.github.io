<html><head><link rel="import" href="../polymer/polymer.html"></head><body><dom-module id="brum-global-variable"><script>var brumGlobalVariable=brumGlobalVariable||{};Polymer({is:'brum-global-variable',properties:{key:String,value:{type:Object,notify:!0,observer:'_valueChanged'},readonly:{type:Boolean,value:!1}},attached:function(){if(this.key)brumGlobalVariable[this.key]?this.value!=brumGlobalVariable[this.key].value&&(this.value=brumGlobalVariable[this.key].value):brumGlobalVariable[this.key]={value:this.value,observers:[this],isChanging:!1},this._setObserver(this.key);else throw new Error('Invalid Argument: The `key` property must be defined.')},detached:function(){var a=brumGlobalVariable[this.key].observers.indexOf(this);-1!==a&&brumGlobalVariable[this.key].observers.splice(a,1)},_setObserver:function(a){var b=brumGlobalVariable[a].observers.indexOf(this);-1===b&&brumGlobalVariable[a].observers.push(this)},_valueChanged:function(a,b){this.readonly||a==b||!brumGlobalVariable[this.key]||a==brumGlobalVariable[this.key].value||brumGlobalVariable[this.key].isChanging||this._setValue(this.key,a)},_setValue:function(a,b){for(var c in brumGlobalVariable[a].isChanging=!0,brumGlobalVariable[a].value=b,brumGlobalVariable[a].observers)brumGlobalVariable[a].observers[c]!=this&&brumGlobalVariable[a].observers[c].set('value',b);brumGlobalVariable[a].isChanging=!1}});</script></dom-module></body></html>